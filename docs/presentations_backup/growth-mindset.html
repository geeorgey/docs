<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>勝手に成長するということの重要性について</title>
    
    <!-- OGP Meta Tags -->
    <meta property="og:title" content="勝手に成長するということの重要性について">
    <meta property="og:description" content="組織とツールの成長戦略について考える。Salesforce、AI、コミュニケーションツールの選択が組織のキャパシティを決める重要性を解説。">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://geeorgey.github.io/docs/presentations/growth-mindset.html">
    <meta property="og:image" content="https://geeorgey.github.io/docs/images/ogp-growth-mindset-default.png">
    <meta property="og:site_name" content="吉田丈治 プレゼンテーションアーカイブ">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="勝手に成長するということの重要性について">
    <meta name="twitter:description" content="組織とツールの成長戦略について考える。Salesforce、AI、コミュニケーションツールの選択が組織のキャパシティを決める重要性を解説。">
    <meta name="twitter:image" content="https://geeorgey.github.io/docs/images/ogp-growth-mindset-default.png">
    
    <!-- Marked.js for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        body {
            font-family: 'Noto Sans JP', system-ui, -apple-system, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        
        .slide-container {
            position: relative;
            background: #f8fafc;
        }
        
        /* 基本スライドスタイル */
        .slide {
            background: linear-gradient(135deg, #0ea5e9 0%, #06b6d4 50%, #10b981 100%);
            color: white;
            padding: 40px;
            margin: 20px 0;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e5e7eb;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        /* レイアウトパターン1: 中央寄せ（デフォルト） */
        .slide.layout-center {
            text-align: center;
            align-items: center;
            justify-content: center;
        }
        
        /* レイアウトパターン2: 左寄せ */
        .slide.layout-left {
            text-align: left;
            align-items: flex-start;
            justify-content: center;
            padding-left: 60px;
            padding-right: 60px;
        }
        
        /* レイアウトパターン3: 左寄せ + 右側画像 */
        .slide.layout-left-image-right {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: center;
            text-align: left;
            padding: 40px 60px;
        }
        
        .slide.layout-left-image-right .slide-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .slide.layout-left-image-right .slide-image {
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
        }
        
        .slide.layout-left-image-right .slide-image img {
            max-width: 100%;
            height: auto;
            border-radius: 4px;
        }
        
        /* レイアウトパターン4: 左側画像 + 右寄せテキスト */
        .slide.layout-image-left-right {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 40px;
            align-items: center;
            text-align: left;
            padding: 40px 60px;
        }
        
        .slide.layout-image-left-right .slide-image {
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 20px;
            min-height: 300px;
        }
        
        .slide.layout-image-left-right .slide-content {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        /* 中表紙レイアウト */
        .slide.layout-section {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 50%, #ec4899 100%);
            text-align: center;
            align-items: center;
            justify-content: center;
            font-size: 120%;
        }
        
        .slide.layout-section h1,
        .slide.layout-section h2 {
            font-size: 200%;
            margin-bottom: 30px;
        }
        
        .slide h1 {
            font-size: 180%;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .slide h2 {
            font-size: 150%;
            margin-bottom: 15px;
            line-height: 1.3;
        }
        
        .slide h3 {
            font-size: 130%;
            margin-bottom: 10px;
            line-height: 1.4;
        }
        
        .slide p {
            font-size: 110%;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .slide ul {
            text-align: left;
            font-size: 105%;
            line-height: 1.8;
            margin: 20px 0;
            padding-left: 30px;
        }
        
        .slide li {
            margin-bottom: 8px;
        }
        
        .slide strong {
            font-weight: bold;
            color: #fbbf24;
        }
        
        .slide em {
            font-style: italic;
            color: #fde047;
        }
        
        .slide blockquote {
            border-left: 4px solid #fbbf24;
            padding-left: 20px;
            margin: 20px 0;
            font-style: italic;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-radius: 4px;
        }
        
        .slide hr {
            border: none;
            height: 2px;
            background: rgba(255, 255, 255, 0.3);
            margin: 30px 0;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 500px;
        }
        
        .spinner {
            border: 4px solid #f3f4f6;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .navigation {
            text-align: center;
            margin: 20px 0;
        }
        
        .nav-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .nav-button:hover {
            background: #2563eb;
        }
        
        .nav-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
        }
        
        .slide-info {
            text-align: center;
            margin: 10px 0;
            color: #6b7280;
            font-size: 14px;
        }
        
        .slide-overview {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px auto;
            max-width: 900px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .slide-overview h3 {
            color: #1f2937;
            margin-bottom: 15px;
        }
        
        .slide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .slide-thumbnail {
            background: #f3f4f6;
            border: 2px solid #e5e7eb;
            border-radius: 4px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }
        
        .slide-thumbnail:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .slide-thumbnail.active {
            border-color: #3b82f6;
            background: #dbeafe;
        }
        
        .slide-thumbnail-title {
            font-size: 12px;
            color: #374151;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .slide-thumbnail-content {
            font-size: 10px;
            color: #6b7280;
            line-height: 1.3;
            height: 40px;
            overflow: hidden;
        }
        
        /* 全画面表示 */
        .slide-container.fullscreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
            padding: 0;
        }
        
        .slide-container.fullscreen .navigation {
            display: none !important;
        }
        
        .slide-container.fullscreen .slide-overview {
            display: none !important;
        }
        
        .slide-container.fullscreen .slide {
            width: 100vw;
            height: 100vh;
            max-width: none;
            margin: 0;
            border-radius: 0;
            border: none;
            box-shadow: none;
        }
        
        .slide-container.fullscreen .slide-info {
            position: absolute;
            top: 20px;
            right: 20px;
            color: rgba(255, 255, 255, 0.7);
            z-index: 10;
        }
        
        .fullscreen-exit {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(128, 128, 128, 0.3);
            color: rgba(255, 255, 255, 0.7);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            z-index: 10001;
            display: none;
        }
        
        .slide-container.fullscreen .fullscreen-exit {
            display: block;
        }
        
        .fullscreen-exit:hover {
            background: rgba(128, 128, 128, 0.5);
            color: rgba(255, 255, 255, 0.9);
        }
        
        /* タップエリア */
        .tap-area {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 50%;
            z-index: 10;
            cursor: pointer;
            display: none;
        }
        
        .tap-area.left {
            left: 0;
        }
        
        .tap-area.right {
            right: 0;
        }
        
        .slide-container.fullscreen .tap-area {
            display: block;
        }
        
        /* レスポンシブ対応 */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .slide {
                padding: 20px;
                min-height: 400px;
            }
            
            .slide.layout-left-image-right,
            .slide.layout-image-left-right {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 30px;
            }
            
            .slide h1 {
                font-size: 150%;
            }
            
            .slide h2 {
                font-size: 130%;
            }
            
            .slide p {
                font-size: 100%;
            }
            
            .slide-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="slide-container" id="slideContainer">
        <div class="slide-info">
            <span id="slideNumber">1</span> / <span id="totalSlides">22</span>
        </div>
        
        <div class="slide loading" id="slideContent">
            <div class="spinner"></div>
            <p>スライドを読み込み中...</p>
        </div>
        
        <div class="navigation">
            <button class="nav-button" id="prevBtn" onclick="previousSlide()">← 前へ</button>
            <button class="nav-button" id="fullscreenBtn" onclick="toggleFullscreen()">⛶ 全画面</button>
            <button class="nav-button" id="nextBtn" onclick="nextSlide()">次へ →</button>
        </div>
        
        <div class="slide-overview">
            <h3>スライド一覧</h3>
            <div class="slide-grid" id="slideGrid">
                <!-- スライドサムネイルがここに動的に生成されます -->
            </div>
        </div>
        
        <button class="fullscreen-exit" onclick="exitFullscreen()">❌</button>
        
        <!-- タップエリア -->
        <div class="tap-area left" onclick="previousSlide()"></div>
        <div class="tap-area right" onclick="nextSlide()"></div>
    </div>

    <script>
        let currentSlide = 1;
        let totalSlides = 22;
        let slides = [];
        let isFullscreen = false;

        // URLパラメータから初期スライド番号を取得
        const urlParams = new URLSearchParams(window.location.search);
        const slideParam = urlParams.get('slide');
        if (slideParam && !isNaN(slideParam)) {
            currentSlide = Math.max(1, Math.min(parseInt(slideParam), totalSlides));
        }

        // マークダウンファイルを読み込み
        async function loadSlides() {
            try {
                const response = await fetch('../slide-framework/growth-mindset-slides.md');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const markdown = await response.text();
                
                // マークダウンをスライドに分割
                const slideTexts = markdown.split('---').filter(slide => slide.trim());
                slides = slideTexts.map(slideText => marked.parse(slideText.trim()));
                totalSlides = slides.length;
                
                document.getElementById('totalSlides').textContent = totalSlides;
                
                // スライドサムネイルを生成
                generateSlideThumbnails();
                
                // 初期スライドを表示
                showSlide(currentSlide);
                
            } catch (error) {
                console.error('スライドの読み込みに失敗しました:', error);
                document.getElementById('slideContent').innerHTML = 
                    '<div class="slide"><h1>エラー</h1><p>スライドの読み込みに失敗しました。</p></div>';
            }
        }

        // 指定されたスライドを表示
        function showSlide(slideNumber) {
            if (slideNumber < 1 || slideNumber > totalSlides) return;
            
            currentSlide = slideNumber;
            const slideContentElement = document.getElementById('slideContent');
            
            // ローディングクラスを削除
            slideContentElement.classList.remove('loading');
            
            // スライド内容を設定
            slideContentElement.innerHTML = slides[currentSlide - 1];
            
            // レイアウトクラスを自動判定して適用
            applySlideLayout(slideContentElement);
            
            // スライド番号を更新
            document.getElementById('slideNumber').textContent = currentSlide;
            
            // ナビゲーションボタンの状態を更新
            document.getElementById('prevBtn').disabled = currentSlide === 1;
            document.getElementById('nextBtn').disabled = currentSlide === totalSlides;
            
            // アクティブなサムネイルを更新
            updateActiveThumbnail();
            
            // URLを更新
            updateURL();
            
            // OGPメタタグを更新
            updateOGP();
        }

        // スライドレイアウトを自動判定して適用
        function applySlideLayout(slideElement) {
            const content = slideElement.textContent || slideElement.innerText;
            const hasH1 = slideElement.querySelector('h1');
            const hasH2 = slideElement.querySelector('h2');
            const wordCount = content.length;
            
            // 既存のレイアウトクラスを削除
            slideElement.className = 'slide';
            
            // 中表紙判定（文字数が少なく、大きな見出しがある）
            if (wordCount < 100 && (hasH1 || hasH2)) {
                slideElement.classList.add('layout-section');
            }
            // 文字数が多い場合は左寄せ
            else if (wordCount > 200) {
                slideElement.classList.add('layout-left');
            }
            // デフォルトは中央寄せ
            else {
                slideElement.classList.add('layout-center');
            }
        }

        // スライドサムネイルを生成
        function generateSlideThumbnails() {
            const slideGrid = document.getElementById('slideGrid');
            slideGrid.innerHTML = '';
            
            slides.forEach((slide, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = 'slide-thumbnail';
                thumbnail.onclick = () => showSlide(index + 1);
                
                // スライドタイトルを抽出
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = slide;
                const title = tempDiv.querySelector('h1, h2, h3');
                const titleText = title ? title.textContent : `スライド ${index + 1}`;
                
                // スライド内容のプレビューを作成
                const content = tempDiv.textContent || tempDiv.innerText;
                const preview = content.substring(0, 50) + (content.length > 50 ? '...' : '');
                
                thumbnail.innerHTML = `
                    <div class="slide-thumbnail-title">${index + 1}. ${titleText}</div>
                    <div class="slide-thumbnail-content">${preview}</div>
                `;
                
                slideGrid.appendChild(thumbnail);
            });
        }

        // アクティブなサムネイルを更新
        function updateActiveThumbnail() {
            const thumbnails = document.querySelectorAll('.slide-thumbnail');
            thumbnails.forEach((thumbnail, index) => {
                thumbnail.classList.toggle('active', index + 1 === currentSlide);
            });
        }

        // URLを更新
        function updateURL() {
            const newURL = new URL(window.location);
            newURL.searchParams.set('slide', currentSlide);
            window.history.replaceState({}, '', newURL);
        }

        // OGPメタタグを更新
        function updateOGP() {
            const baseTitle = "勝手に成長するということの重要性について";
            const slideTitle = getSlideTitle(currentSlide);
            const newTitle = slideTitle ? `${slideTitle} | ${baseTitle} (${currentSlide}/${totalSlides})` : `${baseTitle} (${currentSlide}/${totalSlides})`;
            
            document.title = newTitle;
            document.querySelector('meta[property="og:title"]').content = newTitle;
            document.querySelector('meta[name="twitter:title"]').content = newTitle;
            
            // スライド別OGP画像
            const ogpImage = getOGPImage(currentSlide);
            document.querySelector('meta[property="og:image"]').content = ogpImage;
            document.querySelector('meta[name="twitter:image"]').content = ogpImage;
        }

        // スライドタイトルを取得
        function getSlideTitle(slideNumber) {
            if (slideNumber < 1 || slideNumber > slides.length) return '';
            
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = slides[slideNumber - 1];
            const title = tempDiv.querySelector('h1, h2, h3');
            return title ? title.textContent.trim() : '';
        }

        // OGP画像を取得
        function getOGPImage(slideNumber) {
            const baseURL = "https://geeorgey.github.io/docs/images/";
            
            if (slideNumber === 1) {
                return baseURL + "ogp-growth-mindset-01.png";
            }
            
            return baseURL + "ogp-growth-mindset-default.png";
        }

        // 次のスライドへ
        function nextSlide() {
            if (currentSlide < totalSlides) {
                showSlide(currentSlide + 1);
            }
        }

        // 前のスライドへ
        function previousSlide() {
            if (currentSlide > 1) {
                showSlide(currentSlide - 1);
            }
        }

        // 全画面表示の切り替え
        function toggleFullscreen() {
            const container = document.getElementById('slideContainer');
            const navigation = document.querySelector('.navigation');
            const slideOverview = document.querySelector('.slide-overview');
            
            if (!isFullscreen) {
                container.classList.add('fullscreen');
                navigation.style.display = 'none';
                slideOverview.style.display = 'none';
                isFullscreen = true;
            } else {
                exitFullscreen();
            }
        }

        // 全画面表示を終了
        function exitFullscreen() {
            const container = document.getElementById('slideContainer');
            const navigation = document.querySelector('.navigation');
            const slideOverview = document.querySelector('.slide-overview');
            
            container.classList.remove('fullscreen');
            navigation.style.display = '';
            slideOverview.style.display = '';
            isFullscreen = false;
        }

        // キーボードイベント
        document.addEventListener('keydown', function(event) {
            switch(event.key) {
                case 'ArrowLeft':
                case 'ArrowUp':
                    event.preventDefault();
                    previousSlide();
                    break;
                case 'ArrowRight':
                case 'ArrowDown':
                case ' ':
                    event.preventDefault();
                    nextSlide();
                    break;
                case 'f':
                case 'F':
                    event.preventDefault();
                    toggleFullscreen();
                    break;
                case 'Escape':
                    if (isFullscreen) {
                        event.preventDefault();
                        exitFullscreen();
                    }
                    break;
            }
        });

        // ブラウザの戻る/進むボタン対応
        window.addEventListener('popstate', function(event) {
            const urlParams = new URLSearchParams(window.location.search);
            const slideParam = urlParams.get('slide');
            if (slideParam && !isNaN(slideParam)) {
                const newSlide = Math.max(1, Math.min(parseInt(slideParam), totalSlides));
                if (newSlide !== currentSlide) {
                    showSlide(newSlide);
                }
            }
        });

        // ページ読み込み時にスライドを読み込み
        document.addEventListener('DOMContentLoaded', loadSlides);
    </script>
</body>
</html>

